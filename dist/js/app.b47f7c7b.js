(function(e){function t(t){for(var a,i,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],o[i]&&p.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("c21b"),o=n.n(a);o.a},"2a1c":function(e,t,n){},"38e9":function(e,t,n){"use strict";var a=n("5323"),o=n.n(a);o.a},5323:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.theme,attrs:{id:"app"}},[n("Navbar"),n("div",{staticClass:"content"},[n("Game"),e.isMultiplayer?e._e():n("LeaderBoard")],1)],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar"},[n("div",{staticClass:"brand"},[n("div",{staticClass:"icon"},[n("svg",{attrs:{viewBox:"0 0 512 512"}},[n("defs",{attrs:{id:"defs8"}}),n("path",{attrs:{id:"path2",d:"M336.174 80c-49.132 0-93.305-32-161.913-32-31.301 0-58.303 6.482-80.721 15.168a48.04 48.04 0 0 0 2.142-20.727C93.067 19.575 74.167 1.594 51.201.104 23.242-1.71 0 20.431 0 48c0 17.764 9.657 33.262 24 41.562V496c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-83.443C109.869 395.28 143.259 384 199.826 384c49.132 0 93.305 32 161.913 32 58.479 0 101.972-22.617 128.548-39.981C503.846 367.161 512 352.051 512 335.855V95.937c0-34.459-35.264-57.768-66.904-44.117C409.193 67.309 371.641 80 336.174 80zM464 336c-21.783 15.412-60.824 32-102.261 32-59.945 0-102.002-32-161.913-32-43.361 0-96.379 9.403-127.826 24V128c21.784-15.412 60.824-32 102.261-32 59.945 0 102.002 32 161.913 32 43.271 0 96.32-17.366 127.826-32v240z",fill:"currentColor"}}),n("path",{staticStyle:{"line-height":"normal","text-indent":"0","text-align":"start","text-decoration":"none","text-decoration-line":"none","text-decoration-style":"solid","text-decoration-color":"currenColor","text-transform":"none",isolation:"auto","mix-blend-mode":"normal","stroke-width":"4.34515285"},attrs:{d:"m 211.33423,140.17545 a 4.345594,4.3455811 60 0 0 -1.50188,5.95311 l 8.79639,15.23578 c -15.34342,10.02707 -26.06615,24.63999 -31.40834,41.00574 l -17.04163,-4.56636 a 4.345594,4.3455811 60 0 0 -3.35503,0.41813 4.345594,4.3455811 60 0 0 1.1061,7.97519 l 17.01843,4.56009 c -3.50306,16.83875 -1.5382,34.87812 6.72819,51.21824 l -15.24312,8.80062 a 4.345594,4.3455811 60 1 0 4.34517,7.52605 l 15.24312,-8.80062 c 10.01775,15.32894 24.65786,26.05024 40.99219,31.43588 l -4.56007,17.01843 a 4.345594,4.3455811 60 1 0 8.39328,2.24901 l 4.56624,-17.04166 c 16.84426,3.55643 34.86078,1.57672 51.21619,-6.69753 l 8.7964,15.23582 a 4.345594,4.3455811 60 1 0 7.52599,-4.34514 l -8.7964,-15.23581 c 15.34343,-10.02709 26.06615,-24.63999 31.40832,-41.00575 l 17.04165,4.56634 a 4.345594,4.3455811 60 1 0 2.24893,-8.3933 l -17.01843,-4.56007 c 3.50306,-16.83877 1.5382,-34.87812 -6.72818,-51.21822 l 15.24311,-8.80062 a 4.345594,4.3455811 60 1 0 -4.34516,-7.52605 l -15.24311,8.80062 C 316.74481,168.6544 302.10469,157.9331 285.77037,152.54746 l 4.56007,-17.01844 a 4.345594,4.3455811 60 0 0 -6.46393,-4.88184 4.345594,4.3455811 60 0 0 -1.92935,2.6328 l -4.56626,17.04168 c -16.84424,-3.5564 -34.86075,-1.57671 -51.21617,6.69755 l -8.79638,-15.23579 a 4.345594,4.3455811 60 0 0 -6.02412,-1.60797 z m 11.39854,58.71334 c 11.43203,-6.60028 26.04542,-2.6846 32.64572,8.74746 6.6003,11.43204 2.68469,26.04547 -8.74734,32.64575 -11.43201,6.60028 -26.04542,2.68459 -32.64572,-8.74746 -6.6003,-11.43205 -2.68467,-26.04547 8.74734,-32.64575 z",id:"path80"}})])]),n("h1",{staticClass:"title"},[e._v("Minesweeper")])]),n("div",{directives:[{name:"responsive",rawName:"v-responsive",value:"hidden-xs",expression:"'hidden-xs'"}],staticClass:"menu"},[e.playerInfo?n("div",{staticClass:"playerInfo"},[n("h3",{staticClass:"playerName"},[e._v(e._s(e.playerInfo.username))]),n("span",{staticClass:"playerLevel"},[e._v("lvl "+e._s(e.playerInfo.lvl))]),n("div",{staticClass:"meter"},[n("span",{style:e.meterWidth})])]):n("div",{staticClass:"loginButtons"},[n("button",{on:{click:e.login}},[e._v("Select your name")])]),n("Settings")],1),e.playerInfo?n("div",{directives:[{name:"responsive",rawName:"v-responsive.sm.xs",modifiers:{sm:!0,xs:!0}}],staticClass:"playerInfo"},[n("h3",{staticClass:"playerName"},[e._v(e._s(e.playerInfo.username))]),n("div",{staticClass:"level"},[n("span",{staticClass:"playerLevel"},[e._v("lvl "+e._s(e.playerInfo.lvl))]),n("div",{staticClass:"meter"},[n("span",{style:e.meterWidth})])])]):n("div",{directives:[{name:"responsive",rawName:"v-responsive.sm.xs",modifiers:{sm:!0,xs:!0}}],staticClass:"loginButtons"},[n("button",{on:{click:e.login}},[e._v("Select your name")])]),n("Settings",{directives:[{name:"responsive",rawName:"v-responsive.sm.xs",modifiers:{sm:!0,xs:!0}}]})],1)},s=[],l=function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"container"},[a("button",{staticClass:"icon",on:{click:function(){return e.open=!e.open}}},[a("img",{staticStyle:{height:"20px",width:"20px"},attrs:{src:t.cog}})]),t.open?a("div",{staticClass:"menu"},[a("div",{staticClass:"themeOptions"},[a("p",[t._v("Theme:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.theme,expression:"theme"}],staticClass:"select-css",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});t.theme=e.target.multiple?n:n[0]},t.changeSelect]}},t._l(t.themeOptions,function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v("\n        "+t._s(e.display)+"\n      ")])}))])]):t._e()])},c=[],u=(n("ac6a"),n("456d"),n("b9e9")),d={name:"Settings",data:function(){return{open:!1}},computed:{themeOptions:function(){return Object.keys(u).map(function(e){return u[e].displayName?{value:e,display:u[e].displayName}:{value:e,display:e}})},theme:function(){return this.$store.state.theme},cog:function(){var e=this.$store.state.theme;return e&&u[e]&&u[e].icons&&u[e].icons.cog?u[e].icons.cog:u.default.icons.cog}},methods:{changeSelect:function(e){this.$store.commit("changeTheme",e.target.value),this.open=!1}}},p=d,f=(n("38e9"),n("2877")),m=Object(f["a"])(p,l,c,!1,null,"2ef6a6f2",null);m.options.__file="Settings.vue";var v=m.exports,h={name:"navbar",components:{Settings:v},computed:{playerInfo:function(){return this.$store.state.playerInfo},meterWidth:function(){var e=this.$store.state.playerInfo;return"width: ".concat(e.lvlExp/e.nextExp*100,"%")}},methods:{login:function(){var e=prompt("Enter your username");this.$store.dispatch("login",e)}}},y=h,g=(n("9198"),Object(f["a"])(y,i,s,!1,null,"1b293de7",null));g.options.__file="Navbar.vue";var b=g.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"selectGame"},[n("button",{staticClass:"button",on:{click:function(t){e.startGame("easy")}}},[e._v("Easy")]),n("button",{staticClass:"button",on:{click:function(t){e.startGame("medium")}}},[e._v("Medium")]),n("button",{staticClass:"button",on:{click:function(t){e.startGame("hard")}}},[e._v("Hard")]),n("button",{staticClass:"button",on:{click:e.startMultiplayerGame}},[e._v("Multiplayer")])]),n("div",{staticClass:"boards"},[n("GameBoard",{staticClass:"gameBoard"}),e.isMultiplayer?n("GameBoard",{staticClass:"gameBoard opponentBoard",attrs:{opponent:!0}}):e._e()],1),e.isMultiplayer&&!e.gameStarted?n("div",[e._v("\n    Looking for an opponent "+e._s(e.points)+"\n  ")]):e._e(),e.isMultiplayer&&e.multiplayerResultPhrase?n("div",[n("h2",[e._v("\n      "+e._s(e.multiplayerResultPhrase)+"\n    ")])]):e._e(),e.isMultiplayer?e._e():n("div",[e.finished?n("h2",{staticClass:"text"},[e._v("\n      "+e._s(e.finishedPhrase)+"\n    ")]):n("h2",{staticClass:"text"},[e._v("\n      Time: "+e._s(e.timeCount)+"\n    ")])])])},C=[],I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"boardContainer"},[n("div",{staticClass:"board",class:{filled:e.board.length>0}},e._l(e.board,function(t,a){return n("div",{key:a,staticClass:"row"},e._l(t,function(t,o){return n("div",{key:o,staticClass:"element",class:{open:"?"!==t&&"F"!==t}},[n("GameCell",{directives:[{name:"longclick",rawName:"v-longclick",value:function(){return e.flagCellMobile(a,o)},expression:"() => flagCellMobile(indexX, indexY)"}],attrs:{element:t,x:a,y:o},nativeOn:{click:function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:void e.openCell(a,o):null},contextmenu:function(t){t.preventDefault(),e.flagCell(a,o)}}})],1)}))})),e.multiplayerInfo&&e.gameStarted?n("div",{staticClass:"multiplayerInfo"},[n("p",{staticClass:"username"},[e._v(e._s(e.multiplayerInfo.username))]),e.multiplayerInfo.lvl?n("span",{staticClass:"level"},[e._v("lvl "+e._s(e.multiplayerInfo.lvl))]):e._e()]):e._e()])},x=[],k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell",class:{open:"?"!==e.element&&"F"!==e.element}},["F"===e.element?n("img",{attrs:{src:e.flag}}):e._e(),"?"!==e.element&&"F"!==e.element?n("div",{staticClass:"center"},["X"===e.element?n("img",{attrs:{src:e.mine}}):n("span",[e._v(e._s(e.element))])]):e._e()])},w=[],$=(n("c5f6"),{name:"GameCell",props:{element:String,state:Number},computed:{flag:function(){var e=this.$store.state.theme;return e&&u[e]&&u[e].icons&&u[e].icons.flag?u[e].icons.flag:u.default.icons.flag},mine:function(){var e=this.$store.state.theme;return e&&u[e]&&u[e].icons&&u[e].icons.mine?u[e].icons.mine:u.default.icons.mine}}}),O=$,S=(n("9dfd"),Object(f["a"])(O,k,w,!1,null,"e6db54ea",null));S.options.__file="GameCell.vue";var B=S.exports,G=n("9029"),M={name:"HelloWorld",components:{GameCell:B},props:{opponent:Boolean},computed:{board:function(){return this.opponent?this.$store.state.opponentBoard:this.$store.state.board},multiplayerInfo:function(){return"multiplayer"===this.$store.state.mode?this.opponent?this.$store.state.opponentInfo:this.$store.state.playerInfo:void 0},gameStarted:function(){return this.$store.state.board&&this.$store.state.board.length>0}},methods:{openCell:function(e,t){this.opponent||this.$store.dispatch("openCell",{x:e,y:t})},flagCellMobile:function(e,t){this.opponent||G["isMobile"]&&this.$store.dispatch("flagCell",{x:e,y:t})},flagCell:function(e,t){this.opponent||this.$store.dispatch("flagCell",{x:e,y:t})}}},j=M,P=(n("bee9"),Object(f["a"])(j,I,x,!1,null,"1e8e2414",null));P.options.__file="GameBoard.vue";var N=P.exports,T={name:"app",components:{GameBoard:N},created:function(){var e=this;setInterval(function(){e.points.length>2?e.points=".":e.points+="."},1e3)},data:function(){return{points:".",interval:void 0}},computed:{finished:function(){return this.$store.state.finished},finishedPhrase:function(){return this.$store.state.won?"Congratulations, you won :) Time: ".concat(this.timeCount,"s"):"Sorry, you have lost"},timeCount:function(){return this.$store.state.timeCount},isMultiplayer:function(){return"multiplayer"===this.$store.state.mode},gameStarted:function(){return this.$store.state.board&&this.$store.state.board.length>0},multiplayerResultPhrase:function(){var e=this.$store.state.multiplayerResult;return!!e&&("victory"===e?"Congratulations, you won :)":"Sorry, you have lost")}},methods:{startGame:function(e){var t=this;clearInterval(this.interval),this.$store.dispatch("newGame",e),this.$store.commit("changeLeaderboard",e),this.interval=setInterval(function(){t.finished?clearInterval(t.interval):t.$store.commit("incrementTimeCount")},1e3)},startMultiplayerGame:function(){this.$store.dispatch("newMultiplayerGame")}}},L=T,E=(n("ea65"),Object(f["a"])(L,_,C,!1,null,"6d23d3de",null));E.options.__file="Game.vue";var R=E.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"leaderboard"},[n("table",{staticClass:"table"},[e._m(0),e._l(e.leaderBoard,function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.username))]),n("td",[e._v(e._s(t.seconds))])])})],2)])},D=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",[e._v("Name")]),n("th",[e._v("Seconds")])])}],z={name:"app",computed:{leaderBoard:function(){return this.$store.state.actualLeaderboard}}},F=z,W=(n("ec9a"),Object(f["a"])(F,J,D,!1,null,"2c0b54d8",null));W.options.__file="LeaderBoard.vue";var A=W.exports,V={name:"app",components:{Navbar:b,Game:R,LeaderBoard:A,Settings:v},created:function(){this.$store.dispatch("getLeaderboard")},computed:{theme:function(){return this.$store.state.theme},isMultiplayer:function(){return"multiplayer"===this.$store.state.mode}}},H=V,X=(n("034f"),Object(f["a"])(H,o,r,!1,null,null,null));X.options.__file="App.vue";var Y=X.exports,q=n("c93e"),K=n("2f62"),Q=n("8055"),U=n.n(Q);a["a"].use(K["a"]);var Z=new K["a"].Store({state:{board:[],finished:!1,won:void 0,started:null,timeCount:0,leaderBoard:[],actualLeaderboard:[],gameId:void 0,theme:"default",mode:"easy",opponentBoard:[],multiplayerResult:void 0,playerInfo:void 0,opponentInfo:void 0},mutations:{incrementTimeCount:function(e){var t=new Date,n=t.getTime()-e.started.getTime(),a=Math.floor(n/1e3);e.timeCount=a},resetTimeCount:function(e){e.timeCount=0},setLeaderboard:function(e,t){e.leaderBoard=t,e.actualLeaderboard=t[e.mode]},changeLeaderboard:function(e,t){e.actualLeaderboard=e.leaderBoard[t]},setNewGame:function(e,t){e.gameId=t.id,e.board=t.board,e.started=new Date(t.started),e.finished=!1,e.won=void 0},updateBoard:function(e,t){var n=t.boardState,a=t.finished,o=t.won;e.board=n,e.finished=a,e.won=o},updatePlayerBoard:function(e,t){e.board=t},updateOpponentBoard:function(e,t){e.opponentBoard=t},changeTheme:function(e,t){e.theme=t},setSocket:function(e,t){e.socket=t},setGameMode:function(e,t){e.socket&&e.socket.disconnect(),e.mode=t},setMultiplayerResult:function(e,t){e.multiplayerResult=t?"victory":"defeat"},resetGameData:function(e){e.board=[],e.finished=!1,e.won=void 0,e.started=null,e.timeCount=0,e.gameId=void 0,e.opponentBoard=[],e.multiplayerResult=void 0},updatePlayerInfo:function(e,t){e.playerInfo=t},resetOpponentInfo:function(e){e.opponentInfo=void 0},setOpponentInfo:function(e,t){console.log(t),e.opponentInfo=t}},actions:{newGame:function(e,t){var n=e.commit,a={mode:t};n("setGameMode",t),fetch("".concat("/backend","/game/new"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return n("setNewGame",e)})},openCell:function(e,t){var n=e.commit,a=e.state,o=e.dispatch;if("multiplayer"===a.mode)return a.socket.emit("openCell",t);var r=Object(q["a"])({},t);a.playerInfo&&a.playerInfo.token&&(r.token=a.playerInfo.token),fetch("".concat("/backend","/game/").concat(a.gameId,"/open"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:a.playerInfo&&a.playerInfo.token?"JWT ".concat(a.playerInfo.token):"none"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){n("updateBoard",e),e.won&&o("getLeaderboard"),e.playerInfo&&n("updatePlayerInfo",e.playerInfo)})},flagCell:function(e,t){var n=e.commit,a=e.state;if("multiplayer"===a.mode)return a.socket.emit("flagCell",t);fetch("".concat("/backend","/game/").concat(a.gameId,"/flag"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){return n("updateBoard",e)})},getLeaderboard:function(e){var t=e.commit;fetch("".concat("/backend","/leaderboard"),{method:"GET",mode:"cors"}).then(function(e){return e.json()}).then(function(e){return t("setLeaderboard",e)})},submitScore:function(e,t){e.commit;var n=e.dispatch,a=e.state,o={name:t};fetch("".concat("/backend","/game/").concat(a.gameId,"/submitScore"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(){return n("getLeaderboard")})},newMultiplayerGame:function(e){var t=e.commit,n=e.state;t("resetGameData"),t("resetOpponentInfo"),t("setGameMode","multiplayer");var a=U.a.connect("/",{forceNew:!0});t("setSocket",a),a.on("startGame",function(e){var o=e.playerBoard,r=e.opponentBoard;n.playerInfo&&n.playerInfo.token?a.emit("loggedPlayer",n.playerInfo.token):a.emit("unloggedPlayer"),t("updatePlayerBoard",o),t("updateOpponentBoard",r)}),a.on("updatePlayerBoard",function(e){t("updatePlayerBoard",e)}),a.on("updateOpponentBoard",function(e){console.log(e),t("updateOpponentBoard",e)}),a.on("gameFinished",function(e){var n=e.victory;t("setMultiplayerResult",n)}),a.on("opponentInfo",function(e){t("setOpponentInfo",e)})},login:function(e,t){var n=e.commit,a={username:t};fetch("".concat("/backend","/login"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return n("updatePlayerInfo",e)})}}}),ee=(n("c712"),n("616f")),te=n("4a7a"),ne=n.n(te),ae=n("3a81");a["a"].use(ae["a"]);var oe=Object(ee["longClickDirective"])({delay:200,interval:4e3});a["a"].directive("longclick",oe),a["a"].config.productionTip=!1,a["a"].component("v-select",ne.a),new a["a"]({store:Z,render:function(e){return e(Y)}}).$mount("#app")},8:function(e,t){},9198:function(e,t,n){"use strict";var a=n("2a1c"),o=n.n(a);o.a},"9dfd":function(e,t,n){"use strict";var a=n("ee68"),o=n.n(a);o.a},b9e9:function(e){e.exports={default:{icons:{flag:"/themes/default/flag.svg",mine:"/themes/default/mine.svg",cog:"/themes/default/cog.svg"},displayName:"Default"},matrix:{icons:{flag:"/themes/matrix/flag.png",cog:"/themes/matrix/cog.svg"},displayName:"Matrix"},paper:{displayName:"Paper",icons:{flag:"/themes/paper/flag.svg",mine:"/themes/paper/bomb.svg",cog:"/themes/paper/cog.svg"}}}},bee9:function(e,t,n){"use strict";var a=n("ee8f"),o=n.n(a);o.a},c185:function(e,t,n){},c21b:function(e,t,n){},ea65:function(e,t,n){"use strict";var a=n("ec43"),o=n.n(a);o.a},ec43:function(e,t,n){},ec9a:function(e,t,n){"use strict";var a=n("c185"),o=n.n(a);o.a},ee68:function(e,t,n){},ee8f:function(e,t,n){}});
//# sourceMappingURL=app.b47f7c7b.js.map